{"inkVersion":20,"root":[[{"->":"exampleInventoryUse"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"EXT_AddToList":[{"temp=":"y"},{"temp=":"x"},"^[Added ","ev",{"VAR?":"x"},"out","/ev","^ to the list ","ev",{"VAR?":"y"},"out","/ev","^]","\n","ev",{"VAR?":"y"},"/ev","~ret",{"#f":1}],"EXT_RemoveFromList":[{"temp=":"y"},{"temp=":"x"},"^[Removed ","ev",{"VAR?":"x"},"out","/ev","^ from the list ","ev",{"VAR?":"y"},"out","/ev","^]","\n","ev",{"VAR?":"y"},"/ev","~ret",{"#f":1}],"EXT_AddToDictionary":[{"temp=":"z"},{"temp=":"y"},{"temp=":"x"},"^[Adds the Key Value Pair (","ev",{"VAR?":"x"},"out","/ev","^,","ev",{"VAR?":"y"},"out","/ev","^) to ","ev",{"VAR?":"z"},"out","/ev","^]","\n","ev",{"VAR?":"z"},"/ev","~ret",{"#f":1}],"EXT_RemoveFromDictionary":[{"temp=":"y"},{"temp=":"x"},"^[Removes the key and value of key ","ev",{"VAR?":"x"},"out","/ev","^ from ","ev",{"VAR?":"y"},"out","/ev","^]","\n","ev",{"VAR?":"y"},"/ev","~ret",{"#f":1}],"EXT_HasValue":[{"temp=":"y"},{"temp=":"x"},"^[Checks if ","ev",{"VAR?":"x"},"out","/ev","^ exists in list ","ev",{"VAR?":"y"},"out","/ev","^]","\n","ev",true,"/ev","~ret",{"#f":1}],"EXT_GetValue":[{"temp=":"y"},{"temp=":"x"},"^[Gets either the index ","ev",{"VAR?":"x"},"out","/ev","^ or the key ","ev",{"VAR?":"x"},"out","/ev","^ from list ","ev",{"VAR?":"y"},"out","/ev","^]","\n","ev",{"VAR?":"x"},"/ev","~ret",{"#f":1}],"AddToList":[{"temp=":"list"},{"temp=":"key"},"ev",{"VAR?":"key"},{"VAR?":"list"},{"x()":"EXT_AddToList","exArgs":2},"/ev",{"temp=":"list","re":true},"\n",{"#f":1}],"RemoveFromList":[{"temp=":"list"},{"temp=":"key"},"ev",{"VAR?":"key"},{"VAR?":"list"},{"x()":"EXT_RemoveFromList","exArgs":2},"/ev",{"temp=":"list","re":true},"\n",{"#f":1}],"AddToDictionary":[{"temp=":"list"},{"temp=":"value"},{"temp=":"key"},"ev",{"VAR?":"key"},{"VAR?":"value"},{"VAR?":"list"},{"x()":"EXT_AddToDictionary","exArgs":3},"/ev",{"temp=":"list","re":true},"\n",{"#f":1}],"RemoveFromDictionary":[{"temp=":"list"},{"temp=":"key"},"ev",{"VAR?":"key"},{"VAR?":"list"},{"x()":"EXT_RemoveFromDictionary","exArgs":2},"/ev",{"temp=":"list","re":true},"\n",{"#f":1}],"HasValue":[{"temp=":"list"},{"temp=":"key"},"ev",{"VAR?":"key"},{"VAR?":"list"},{"x()":"EXT_HasValue","exArgs":2},"/ev","~ret","\n",{"#f":1}],"GetValue":[{"temp=":"list"},{"temp=":"key"},"ev",{"VAR?":"key"},{"VAR?":"list"},{"x()":"EXT_GetValue","exArgs":2},"/ev","~ret","\n",{"#f":1}],"IsInteractable":[{"temp=":"b"},"ev",{"VAR?":"b"},"/ev",[{"->":".^.b","c":true},{"b":["\n","^INTERACTABLE(true)","\n",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","^INTERACTABLE(false)","\n",{"->":".^.^.^.6"},null]}],"nop","\n",{"#f":1}],"alterStack":[{"temp=":"amount"},{"temp=":"item"},"ev",{"VAR?":"item"},"/ev",["du","ev",{"VAR?":"Oval"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"Oval_stack"},{"VAR?":"amount"},"+",{"VAR=":"Oval_stack","re":true},"/ev","ev",{"VAR?":"Oval_stack"},0,"<=","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",0,"/ev",{"VAR=":"Oval_stack","re":true},"ev",{"VAR?":"MainInventory"},{"VAR?":"Oval"},"-",{"VAR=":"MainInventory","re":true},"/ev",{"->":".^.^.^.14"},null]}],"nop","\n","ev",{"VAR?":"Oval_stack"},10,">","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",10,"/ev",{"VAR=":"Oval_stack","re":true},{"->":".^.^.^.22"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"pop","nop","\n","ev",{"VAR?":"MainInventory"},{"VAR?":"item"},"?","!",{"VAR?":"amount"},0,">","&&","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"MainInventory"},{"VAR?":"item"},"+",{"VAR=":"MainInventory","re":true},"/ev",{"->":".^.^.^.20"},null]}],"nop","\n",{"#f":1}],"start":[[{"#":"clearText"},"^Welcome to Wolfrug's Ink writer dev scene!","\n","^This is my personal project to make Ink useable inside Unity, with a bunch of functions and functionalities I've found especially handy. Most of these exist inside the Demo folder - this is merely the most base implementation.","\n","^At the center of it all is the InkDialogueLine. This is a structure that picks up text from any ink line, and interprets it as a kind of function call. For example you might write MOVE_TO_ROOM(thisroom, fast), which could then be interpreted and picked up by any other script.","\n","^The goal is to let you control things directly using Ink, and very swiftly add new functions in as needed. It also works with Ink tags, although the weakness with tags is they cannot convey information (such as variables).","\n","^Choices also have their own InkChoiceLine which works in nearly the same way, and lets you run 'functions' when clicking the option buttons (or when displaying them).","\n","^The InkVariables that are looked for are set up in Scriptable Objects, that also contain most of the important code, meaning as long as you have access to them, you can do most of the things this framework is meant to do.","\n","ev","str","^I'd like to know more.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Close","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n",{"#":"clearText"},"^First of all, I used an ink tag here to clear the text. For these things I am using the \"Ink Listener\" object, which is hooked up to this writer. I have also hooked it up to listen to the variable PLAYER, with the arguments \"red\" and \"green\". Once it hears those, it will activate either a red or green ball.","\n",{"->":"start.redGreenExample"},{"#f":5}],"c-1":["\n","^PLAYER(end)","\n","end",{"#f":5}]}],{"redGreenExample":[["ev","str","^Activate Red","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Activate Green","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Close","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","^PLAYER(red)","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^PLAYER(green)","\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","^PLAYER(end)","\n","end",{"->":".^.^.g-0"},{"#f":5}],"g-0":[{"->":".^.^.^"},{"#f":5}]}],{"#f":1}],"#f":1}],"startAdvanced":[["^PLAYER(left, nohat) This is on the left, also I have a portrait sans hat.","\n","^PLAYER(right, hat) And this is on the right. I have a hat portrait.","\n","ev",{"VAR?":"trackableVariable"},1,"+",{"VAR=":"trackableVariable","re":true},"/ev","^This is probably also on the right. Also I just increased a variable +1! It is now ","ev",{"VAR?":"trackableVariable"},"out","/ev","^!","\n","^PLAYER(left, hat) Then this is on the left again. I added a hat, and also changed the text to a blue one. SET_TEXTBOX(bluetext)","\n","ev","str","^This is an option that is always here.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","ev",0,1,"rnd",0,">",{"f()":"IsInteractable"},"out","/ev","^This is an option that is sometimes disabled.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^SET_BUTTON_GRAPHIC(left, plus) This button has a plus option.","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","^SET_BUTTON_GRAPHIC(right, warning)SET_BUTTON_GRAPHIC(left, plus) This button has a warning! SET_BUTTON_TEXT(right, Danger!)","/str","/ev",{"*":".^.c-3","flg":4},"ev","str","^SET_OPTIONBOX(redbutton) And this button is red!!","/str","/ev",{"*":".^.c-4","flg":4},{"c-0":["\n","^PLAYER(left, nohat) Great. Hat off!","\n","^PLAYER(right, nohat) Good idea!","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^PLAYER(left, nohat) Lucky us. Off with the hat.","\n","^PLAYER(right, nohat) Yass.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","^Yay! Well done!","\n",{"->":".^.^.g-0"},{"#f":5}],"c-3":["\n","^Oh no, why did you click it!","\n",{"->":".^.^.g-0"},{"#f":5}],"c-4":["\n","^Wow, so cool.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":[{"->":"end"},{"#f":5}]}],{"#f":1}],"end":["^The end!","\n","end",{"#f":1}],"extraText":[["^This is some extra text that we're showing on the side, demonstrating both flow and how you can use the base inkwriter with no bells and whistles.","\n","^This will just display the text as one, with no additional thought put into it.","\n","ev","str","^Options supported!","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","^Options are also supported, obviously.","\n",["ev","str","^Back!","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":"extraText"},{"#f":5}]}],{"#f":5}]}],{"#f":1}],"continue":[["^Hi there. This is set in the other scene, just to show how easily variables and things carry over.","\n","^In the previous scene, we increased trackableVariable to ","ev",{"VAR?":"trackableVariable"},"out","/ev","^. Nice.","\n","^In the previous scene, we picked option 1 ","ev",{"CNT?":"startAdvanced.0.c-0"},"out","/ev","^ times and option 2 ","ev",{"CNT?":"startAdvanced.0.c-1"},"out","/ev","^ times. Neat!","\n","^Welp, that was that. Let's load the other scene back.","\n","ev","str","^Load me back, Scotty! LOAD_SCENE(SampleScene)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Don't load me back.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^[This text won't be visible.]","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^Okely, fine by me.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["end",{"#f":5}]}],{"#f":1}],"exampleCustomButtonsStart":["ev",true,"/ev",{"->":"exampleCustomButtons"},{"#f":1}],"exampleCustomButtons":[{"temp=":"interactable"},["^Hi there, this is to show how you can rewire existing buttons in the scene to apply to choices in your ink writer, letting you easily map functions in your UI for example to your existing Ink thread!","\n","ev","str","^TEST_USE(one)","ev",{"VAR?":"interactable"},{"f()":"IsInteractable"},"out","/ev","^ Number one.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^TEST_USE(two) Number two.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Number three.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","^You clicked the first button! Good work.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^You clicked the second button! Nice.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","^This button wasn't hooked up to anything, cool huh?","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^And that's about all she wrote. Let's go again!","\n","ev","str","^Try again.","/str","/ev",{"*":".^.c-3","flg":4},"ev","str","^Try again, but disable one button.","/str","/ev",{"*":".^.c-4","flg":4},{"c-3":["\n","ev",true,"/ev",{"->":".^.^.^.^"},{"#f":5}],"c-4":["\n","^Okely dokely. The first button will now be disabled.","\n","ev",false,"/ev",{"->":".^.^.^.^"},{"#f":5}],"#f":5}]}],{"#f":1}],"exampleInventoryUse":[["^Hi there, this is a very simple ink inventory example. To work, it needs a LIST with all the items (their name in the list == ID of the inventory item data). The name of the LIST in turn corresponds to the ID of the inventory.","\n",["ev","str","^Add an Oval.","/str",{"VAR?":"Oval_stack"},10,"<","/ev",{"*":".^.c-0","flg":5},"ev","str","^Remove an Oval.","/str",{"VAR?":"MainInventory"},{"VAR?":"Oval"},"?","/ev",{"*":".^.c-1","flg":5},"ev","str","^Add a Hexagon.","/str",{"VAR?":"MainInventory"},{"VAR?":"Hexagon"},"?","!","/ev",{"*":".^.c-2","flg":5},"ev","str","^Remove a Hexagon.","/str",{"VAR?":"MainInventory"},{"VAR?":"Hexagon"},"?","/ev",{"*":".^.c-3","flg":5},"ev","str","^Add a Square.","/str",{"VAR?":"MainInventory"},{"VAR?":"Square"},"?","!","/ev",{"*":".^.c-4","flg":5},"ev","str","^Remove a Square.","/str",{"VAR?":"MainInventory"},{"VAR?":"Square"},"?","/ev",{"*":".^.c-5","flg":5},"ev","str","^Try the usable inventory.","/str","/ev",{"*":".^.c-6","flg":4},{"c-0":["\n","ev",{"VAR?":"Oval"},1,{"f()":"alterStack"},"out","/ev","\n","^We have a simple tag set up to tell the inventory to update (using a listener). Also Ovals are stackable, and we have our own function for that! ",{"#":"updateInventory"},"\n",{"->":".^.^.^.g-0"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"Oval"},-1,{"f()":"alterStack"},"out","/ev","\n","^We have a simple tag set up to tell the inventory to update (using a listener). Also Ovals are stackable, and we have our own function for that! ",{"#":"updateInventory"},"\n",{"->":".^.^.^.g-0"},{"#f":5}],"c-2":["\n","ev",{"VAR?":"MainInventory"},{"VAR?":"Hexagon"},"+",{"VAR=":"MainInventory","re":true},"/ev","^We have a simple tag set up to tell the inventory to update (using a listener). ",{"#":"updateInventory"},"\n",{"->":".^.^.^.g-0"},{"#f":5}],"c-3":["\n","ev",{"VAR?":"MainInventory"},{"VAR?":"Hexagon"},"-",{"VAR=":"MainInventory","re":true},"/ev","^We have a simple tag set up to tell the inventory to update (using a listener). ",{"#":"updateInventory"},"\n",{"->":".^.^.^.g-0"},{"#f":5}],"c-4":["\n","ev",{"VAR?":"MainInventory"},{"VAR?":"Square"},"+",{"VAR=":"MainInventory","re":true},"/ev","^We have a simple tag set up to tell the inventory to update (using a listener). ",{"#":"updateInventory"},"\n",{"->":".^.^.^.g-0"},{"#f":5}],"c-5":["\n","ev",{"VAR?":"MainInventory"},{"VAR?":"Square"},"-",{"VAR=":"MainInventory","re":true},"/ev","^We have a simple tag set up to tell the inventory to update (using a listener). ",{"#":"updateInventory"},"\n",{"->":".^.^.^.g-0"},{"#f":5}],"c-6":["\n",{"->":"exampleUseableInventory"},{"->":".^.^.^.g-0"},{"#f":5}],"#f":5,"#n":"options"}],{"g-0":[{"->":".^.^.options"},{"#f":5}]}],{"#f":1}],"exampleUseableInventory":[["^Let's try to use our inventory items as buttons! Depending on which items we have, they will be available to click now. ",{"#":"showUsableInventory"},"\n","ev","str","^USE_ITEM(","ev",{"VAR?":"Square"},"out","/ev","^)Click the square.","/str",{"VAR?":"MainInventory"},{"VAR?":"Square"},"?","/ev",{"*":".^.c-0","flg":5},"ev","str","^USE_ITEM(","ev",{"VAR?":"Hexagon"},"out","/ev","^)Click the hexagon.","/str",{"VAR?":"MainInventory"},{"VAR?":"Hexagon"},"?","/ev",{"*":".^.c-1","flg":5},"ev","str","^USE_ITEM(","ev",{"VAR?":"Oval"},"out","/ev","^)Click the oval.","/str",{"VAR?":"MainInventory"},{"VAR?":"Oval"},"?","/ev",{"*":".^.c-2","flg":5},"ev","str","^Nevermind.","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":["\n",{"#":"hideUseableInventory"},"^You clicked the square, good work.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n",{"#":"hideUseableInventory"},"^You clicked the Hexagon. Success.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","ev",{"VAR?":"Oval"},-1,{"f()":"alterStack"},"out","/ev","\n",{"#":"updateInventory"},{"#":"hideUseableInventory"},"^You clicked the oval, and in doing so removed one! Oh no.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-3":["\n","^Fair enough.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^Now you can do whatever you want with this, for example add or remove them, or have someone comment on them, etc.","\n","ev","str","^Back to adding / removing","/str","/ev",{"*":".^.c-4","flg":4},"ev","str","^Try again.","/str","/ev",{"*":".^.c-5","flg":4},{"c-4":["\n",{"#":"hideUseableInventory"},{"->":"exampleInventoryUse"},{"#f":5}],"c-5":["\n",{"->":".^.^.^.^"},{"#f":5}],"#f":5}]}],{"#f":1}],"exampleInkText":["^This is an example of an Ink Text object, which can be quite powerful and useful. Just add it to any textmeshprougui object and hook it up to a knot.","\n","^This one also shows the use of the storyoverlay, which listens to events in this text and changes images based on them. In this case, randomly switching between two possible corner images.","\n",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^SET_STORY_IMAGE(corner, dude)",{"->":".^.^.17"},null],"s1":["pop","^SET_STORY_IMAGE(corner, mail)",{"->":".^.^.17"},null],"#f":5}],"\n","^SET_STORY_TEXT(title, Visit Count: ","ev",{"CNT?":".^"},"out","/ev","^)","\n","end",{"#f":1}],"exampleStringTable":["^PLAYER_BARK() This is a player bark.","\n","^OTHER_BARK() Example of another bark.","\n","^PLAYER_BARK() More player bark.","\n","^PLAYER_BARK() Even more player bark.","\n","^OTHER_BARK() And other bark.","\n","^PLAYER_BARK(good) This is an example of a bark with an argument (good).","\n","^PLAYER_BARK(good) Which could for example be used as a unit.","\n","^PLAYER_BARK(bad) Another example of an argument bark with the argument bad.","\n","^PLAYER_BARK(bad) These will also show up though in the generic list of player barks.","\n","end",{"#f":1}],"exampleInkArraysStart":[{"->":".^.intro"},{"intro":["^This is an example of using some string manipulation to create a kind of dictionary or list that can be saved in Ink.","\n",{"->":".^.^.loop"},{"#f":1}],"loop":[["^Current list: ","ev",{"VAR?":"testList"},"out","/ev","\n","^Current dictionary: ","ev",{"VAR?":"testDictionary"},"out","/ev","\n","ev","str","^Add to list.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Remove from list","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Check list","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","^Get value","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":["\n","ev",{"CNT?":".^.^.^"},1,"+",{"^var":"testList","ci":-1},{"f()":"AddToList"},"out","/ev","\n","ev","str","^loopCount","/str",{"CNT?":".^.^.^"},1,"+",{"^var":"testDictionary","ci":-1},{"f()":"AddToDictionary"},"out","/ev","\n","ev","str","^testRemovable","/str","str","^bla bla bla","/str",{"^var":"testDictionary","ci":-1},{"f()":"AddToDictionary"},"out","/ev","\n",{"->":".^.^.^"},{"#f":5}],"c-1":["\n","ev","str","^2","/str",{"^var":"testList","ci":-1},{"f()":"RemoveFromList"},"out","/ev","\n","ev","str","^testRemovable","/str",{"^var":"testDictionary","ci":-1},{"f()":"RemoveFromDictionary"},"out","/ev","\n",{"->":".^.^.^"},{"#f":5}],"c-2":["\n","^Does list contain \"2\"? ","ev","str","^2","/str",{"^var":"testList","ci":-1},{"f()":"HasValue"},"out","/ev","\n","^Does dictionary contain key \"testRemovable\"? ","ev","str","^testRemovable","/str",{"^var":"testDictionary","ci":-1},{"f()":"HasValue"},"out","/ev","\n",{"->":".^.^.^"},{"#f":5}],"c-3":["\n","^Index zero in list is: ","ev",4,{"^var":"testList","ci":-1},{"f()":"GetValue"},"out","/ev","\n","^Under \"testRemovable\" we find: ","ev","str","^testRemovable","/str",{"^var":"testDictionary","ci":-1},{"f()":"GetValue"},"out","/ev","\n",{"->":".^.^.^"},{"#f":5}]}],{"#f":1}],"#f":1}],"global decl":["ev",0,{"VAR=":"trackableVariable"},{"list":{"MainInventory.Hexagon":2}},{"VAR=":"MainInventory"},0,{"VAR=":"Oval_stack"},"str","^","/str",{"VAR=":"testList"},"str","^","/str",{"VAR=":"testDictionary"},"/ev","end",null],"#f":1}],"listDefs":{"MainInventory":{"Oval":1,"Hexagon":2,"Square":3}}}